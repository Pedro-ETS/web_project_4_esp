!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupClass=e,this._selectPopup=document.querySelector(".".concat(this._popupClass)),this._closeButton=this._selectPopup.querySelector(".".concat(this._popupClass,"__btn-close")),this._handleEscClose=this._handleEscClose.bind(this)}var n,r;return n=t,(r=[{key:"open",value:function(){this._selectPopup.classList.add("".concat(this._popupClass,"_opened")),document.addEventListener("keyup",this._handleEscClose),this.setEventListeners()}},{key:"close",value:function(){this._selectPopup.classList.remove("".concat(this._popupClass,"_opened")),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._closeButton.addEventListener("click",(function(){t.close()})),this._selectPopup.addEventListener("click",(function(e){e.target.classList.contains(t._popupClass)&&t.close()}))}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},i.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,t);var e,n,c,s,l=(c=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(c);if(s){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function p(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(n=l.call(this,t))._card=e,n._elementName=document.querySelector(".".concat(n._popupClass,"__lugar")),n._elementImg=document.querySelector(".".concat(n._popupClass,"__image-normal")),n}return e=p,(n=[{key:"open",value:function(){i(u(p.prototype),"open",this).call(this);var t=this._card.target.getAttribute("src"),e=this._card.target.getAttribute("alt"),n=e.substring(9,e.leng);this._elementImg.setAttribute("src",t),this._elementImg.setAttribute("alt","imagen de "+n),this._elementName.textContent=n}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),p}(n),s=[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"MontaÃ±as Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],l=document.querySelector(".container"),p=l.querySelector(".edit-button_action_add"),f=(l.querySelector(".popup"),l.querySelector(".popup-add"),l.querySelector(".popup__btn-close"),l.querySelector(".popup-add__btn-close"),l.querySelector(".add-button")),m=(l.querySelector(".big-picture"),".cards"),y=(l.querySelector(".elements"),document.forms.popupadd,document.querySelector("#popup-name")),b=document.querySelector("#popup-descripcion");function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var _=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardSelector=n,this._handleCardClick=this.handleCardClick}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").setAttribute("src",this._link),this._element.querySelector(".card__image").setAttribute("alt","Imagen de "+this._name),this._element.querySelector(".card__subtitle").textContent=this._name,this._element}},{key:"_likeImage",value:function(t){t.target.classList.toggle("card__btn-love_activate")}},{key:"_trashCard",value:function(t){t.target.parentNode.remove();var e=this._name,n=s.indexOf(e);s.splice(n,1)}},{key:"_displayContainerImage",value:function(t){openWindowContentImage(t),document.addEventListener("keyup",closeWindowdEsc)}},{key:"handleCardClick",value:function(t){new c("big-picture",t).open()}},{key:"_setEventListeners",value:function(){var t=this;this._element.addEventListener("click",(function(e){e.target.classList.contains("card__btn-love")?t._likeImage(e):e.target.classList.contains("card__btn-trash")?t._trashCard(e):e.target.classList.contains("card__image")&&t.handleCardClick(e)}))}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}var g=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=n,this._inputSelectorForm=e.inputSelectorForm,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClassForm=e.inactiveButtonClassForm,this._inputErrorClassForm=e.inputErrorClassForm,this._errorClassForm=e.errorClassForm}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e,n){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClassForm),r.textContent=n}},{key:"_hideInputError",value:function(t,e){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClassForm),n.classList.remove(this._errorClassForm),n.textContent=""}},{key:"_checkInputValidity",value:function(t,e){e.validity.valid?this._hideInputError(t,e):this._showInputError(t,e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(t,e){this._hasInvalidInput(t)?(e.classList.add(this._inactiveButtonClassForm),e.disabled=!0):(e.classList.remove(this._inactiveButtonClassForm),e.disabled=!1)}},{key:"_setEventListeners",value:function(){var t=this,e=document.querySelector(this._formSelector),n=Array.from(e.querySelectorAll(this._inputSelectorForm)),r=e.querySelector("button[type=submit]");".popup-add__btn-save"===".".concat(r.className)&&this._toggleButtonState(n,r),n.forEach((function(o){o.addEventListener("input",(function(i){t._checkInputValidity(e,o),t._toggleButtonState(n,r)}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var k=function(){function t(e,n){var r=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(){var t=this;this._container.innerHTML="",this._renderedItems.forEach((function(e){t._renderer(e)}))}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function q(t){var e=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===j(e)?e:String(e)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=I(r);if(o){var n=I(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return L(t)}(this,t)});function a(t,e){var n,r,o,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=L(n=i.call(this,t)),u=function(t){t.preventDefault(),n.sendObject(),n.close()},(o=q(o="submitHandler"))in r?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n._submitCallback=e,n._form=document.querySelector(".".concat(n._popupClass)),n}return e=a,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._form.querySelectorAll(".".concat(this._popupClass,"__input")),this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"sendObject",value:function(){var t=this._getInputValues();this._submitCallback(t)}},{key:"setEventListeners",value:function(){P(I(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this.submitHandler)}},{key:"close",value:function(){this._form.removeEventListener("submit",this.submitHandler),P(I(a.prototype),"close",this).call(this),this._form.classList.contains("popup-add")&&this._form.reset()}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(n);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===F(o)?o:String(o)),r)}var o}var R=function(){function t(e){var n=e.nameSelector,r=e.jobSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nameElement=document.querySelector(n),this.jobElement=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this.nameElement.textContent,job:this.jobElement.textContent}}},{key:"setUserInfo",value:function(t){this.nameElement.textContent=t.name,this.jobElement.textContent=t.job}}])&&T(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),x=new k({data:s,renderer:function(t){var e=new _(t,".card-template").generateCard();x.addItem(e)}},m);x.renderItems();var V=new B("popup-add",(function(t){s.push(t);var e=new k({data:s,renderer:function(t){var n=new _(t,".card-template").generateCard();e.addItem(n)}},m);e.renderItems()})),A=new R({nameSelector:".profile__subtitle",jobSelector:".profile__text"}),W=new B("popup",(function(t){A.setUserInfo(t)})),z=new g({inputSelectorForm:".popup__input",submitButtonSelectorForm:".popup__btn-save",inactiveButtonClassForm:"popup__btn-save_disabled",inputErrorClassForm:"popup__input_type_error",errorClassForm:"popup__error_visible"},".popup");p.addEventListener("click",(function(){var t=A.getUserInfo();y.value=t.name,b.value=t.job,W.open(),z.enableValidation()}));var N=new g({inputSelectorForm:".popup-add__input",submitButtonSelectorForm:".popup-add__btn-save",inactiveButtonClassForm:"popup-add__btn-save_disabled",inputErrorClassForm:"popup-add__input_type_error",errorClassForm:"popup-add__error_visible"},".popup-add");f.addEventListener("click",(function(){V.open(),N.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SXJGLEVOVDBCLENBQzdDSyxrQkFBbUIsb0JBQ25CNEUseUJBQTBCLHVCQUMxQnhFLHdCQUF5QiwrQkFDekJFLG9CQUFxQiw4QkFDckJFLGVBQWdCLDRCTUlrRCxjQUNwRTFDLEVBQVdqQyxpQkFBaUIsU0FBUyxXQUNuQ3dJLEVBQWM3RSxPQUNkd0YsRUFBU0Qsa0JBQ1gsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdFBvcHVwKSB7XG4gICAgdGhpcy5fcG9wdXBDbGFzcyA9IHNlbGVjdFBvcHVwO1xuICAgIHRoaXMuX3NlbGVjdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5fcG9wdXBDbGFzc31gKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3NlbGVjdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX3BvcHVwQ2xhc3N9X19idG4tY2xvc2VgKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9zZWxlY3RQb3B1cC5jbGFzc0xpc3QuYWRkKGAke3RoaXMuX3BvcHVwQ2xhc3N9X29wZW5lZGApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3NlbGVjdFBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoYCR7dGhpcy5fcG9wdXBDbGFzc31fb3BlbmVkYCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2VsZWN0UG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9wb3B1cENsYXNzKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0UG9wdXAsIGV2dCkge1xuICAgIHN1cGVyKHNlbGVjdFBvcHVwKTtcbiAgICB0aGlzLl9jYXJkID0gZXZ0O1xuICAgIHRoaXMuX2VsZW1lbnROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5fcG9wdXBDbGFzc31fX2x1Z2FyYCk7XG4gICAgdGhpcy5fZWxlbWVudEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX3BvcHVwQ2xhc3N9X19pbWFnZS1ub3JtYWxgXG4gICAgKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICBjb25zdCBsaW5rID0gdGhpcy5fY2FyZC50YXJnZXQuZ2V0QXR0cmlidXRlKFwic3JjXCIpO1xuICAgIGNvbnN0IGFsdCA9IHRoaXMuX2NhcmQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImFsdFwiKTtcbiAgICBjb25zdCBjaXR5ID0gYWx0LnN1YnN0cmluZyg5LCBhbHQubGVuZyk7XG4gICAgdGhpcy5fZWxlbWVudEltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGluayk7XG4gICAgdGhpcy5fZWxlbWVudEltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgXCJpbWFnZW4gZGUgXCIgKyBjaXR5KTtcbiAgICB0aGlzLl9lbGVtZW50TmFtZS50ZXh0Q29udGVudCA9IGNpdHk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUGFycXVlIE5hY2lvbmFsIGRlIGxhIFZhbm9pc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuZXhwb3J0IGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xuZXhwb3J0IGNvbnN0IGJ0bkVkaXRhclByb2ZpbGUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5lZGl0LWJ1dHRvbl9hY3Rpb25fYWRkXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XG5leHBvcnQgY29uc3QgcG9wdXBBZGRDYXJkID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYWRkXCIpO1xuZXhwb3J0IGNvbnN0IGJ0bkNsb3NlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J0bi1jbG9zZVwiKTtcbmV4cG9ydCBjb25zdCBidG5DbG9zZVdpbmRvd0FkZENhcmQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1hZGRfX2J0bi1jbG9zZVwiKTtcbmV4cG9ydCBjb25zdCBidG5BZGRDYXJkID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBjb250ZW50QmlnUGljdHVyZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmJpZy1waWN0dXJlXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzID0gXCIuY2FyZHNcIjtcbmV4cG9ydCBjb25zdCBlbGVtZW50cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1Qb3B1cEFkZCA9IGRvY3VtZW50LmZvcm1zLnBvcHVwYWRkO1xuZXhwb3J0IGNvbnN0IGVsZW1lbnRQb3B1cE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLW5hbWVcIik7XG5leHBvcnQgY29uc3QgZWxlbWVudFBvcHVwSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1kZXNjcmlwY2lvblwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dFNlbGVjdG9yc1BvcHVwPXtuYW1lU2VsZWN0b3I6XCIucHJvZmlsZV9fc3VidGl0bGVcIixqb2JTZWxlY3RvcjpcIi5wcm9maWxlX190ZXh0XCJ9XG5leHBvcnQgY29uc3QgcG9wdXBGb3JtU2VsZWN0b3JzVG9WYWxpZGF0ZSA9IHtcbiAgaW5wdXRTZWxlY3RvckZvcm06IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvckZvcm06IFwiLnBvcHVwX19idG4tc2F2ZVwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzRm9ybTogXCJwb3B1cF9fYnRuLXNhdmVfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzRm9ybTogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzRm9ybTogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZEZvcm1TZWxlY3RvcnNUb1ZhbGlkYXRlID0ge1xuICBpbnB1dFNlbGVjdG9yRm9ybTogXCIucG9wdXAtYWRkX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvckZvcm06IFwiLnBvcHVwLWFkZF9fYnRuLXNhdmVcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzc0Zvcm06IFwicG9wdXAtYWRkX19idG4tc2F2ZV9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3NGb3JtOiBcInBvcHVwLWFkZF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzRm9ybTogXCJwb3B1cC1hZGRfX2Vycm9yX3Zpc2libGVcIixcbn07IiwiaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQge2luaXRpYWxDYXJkc30gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNhcmRTZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWUgPSBlbGVtZW50Lm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGVsZW1lbnQubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gdGhpcy5oYW5kbGVDYXJkQ2xpY2s7XG4gIH1cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLl9saW5rKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc2V0QXR0cmlidXRlKFwiYWx0XCIsIFwiSW1hZ2VuIGRlIFwiICsgdGhpcy5fbmFtZSk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3N1YnRpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuICBfbGlrZUltYWdlKGV2dCkge1xuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2J0bi1sb3ZlX2FjdGl2YXRlXCIpO1xuICB9XG4gIF90cmFzaENhcmQoZXZ0KSB7XG4gICAgbGV0IHBhcmVudE5vZG8gPSBldnQudGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgcGFyZW50Tm9kby5yZW1vdmUoKTtcbiAgICBjb25zdCBuYW1lPXRoaXMuX25hbWU7XG4gICAgY29uc3QgaW5kZXhDYXJkPWluaXRpYWxDYXJkcy5pbmRleE9mKG5hbWUpO1xuICAgaW5pdGlhbENhcmRzLnNwbGljZShpbmRleENhcmQsIDEpO1xuICB9XG4gIF9kaXNwbGF5Q29udGFpbmVySW1hZ2UoZXZ0KSB7XG4gICAgb3BlbldpbmRvd0NvbnRlbnRJbWFnZShldnQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBjbG9zZVdpbmRvd2RFc2MpO1xuICB9XG5cbiAgaGFuZGxlQ2FyZENsaWNrKGV2dCkge1xuICAgIGNvbnN0IHJlcyA9IG5ldyBQb3B1cFdpdGhJbWFnZShcImJpZy1waWN0dXJlXCIsIGV2dCk7XG4gICAgcmVzLm9wZW4oKTtcbiAgfVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fYnRuLWxvdmVcIikpIHtcbiAgICAgICAgdGhpcy5fbGlrZUltYWdlKGV2dCk7XG4gICAgICB9IGVsc2UgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fYnRuLXRyYXNoXCIpKSB7XG4gICAgICAgIHRoaXMuX3RyYXNoQ2FyZChldnQpO1xuXG4gICAgICB9IGVsc2UgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9faW1hZ2VcIikpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2soZXZ0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGRhdG9zLCBmb3JtU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvckZvcm0gPSBkYXRvcy5pbnB1dFNlbGVjdG9yRm9ybTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGRhdG9zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3NGb3JtID0gZGF0b3MuaW5hY3RpdmVCdXR0b25DbGFzc0Zvcm07XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzRm9ybSA9IGRhdG9zLmlucHV0RXJyb3JDbGFzc0Zvcm07XG4gICAgdGhpcy5fZXJyb3JDbGFzc0Zvcm0gPSBkYXRvcy5lcnJvckNsYXNzRm9ybTtcbiAgfVxuICBfc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzc0Zvcm0pO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfVxuICBfaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3NGb3JtKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzRm9ybSk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXG4gICAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzRm9ybSk7XG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3NGb3JtKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU2VsZWN0b3IpO1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3JGb3JtKVxuICAgICk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25bdHlwZT1zdWJtaXRdXCIpO1xuICAgIGlmIChgLiR7YnV0dG9uRWxlbWVudC5jbGFzc05hbWV9YCA9PT0gXCIucG9wdXAtYWRkX19idG4tc2F2ZVwiKSB7XG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuICAgIH1cbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSxjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdFBvcHVwLCBzdWJtaXRDYWxsYmFjaykge1xuICAgIHN1cGVyKHNlbGVjdFBvcHVwKTtcbiAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrO1xuICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9wb3B1cENsYXNzfWApO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAvLyBPYnRpZW5lIGxvcyBlbGVtZW50b3MgZGUgdG9kb3MgbG9zIGNhbXBvc1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChgLiR7dGhpcy5fcG9wdXBDbGFzc31fX2lucHV0YCk7XG4gICAgLy8gQ3JlYSB1biBvYmpldG8gdmFjw61vXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgLy8gQWdyZWdhIGxvcyB2YWxvcmVzIGRlIGxvcyBjYW1wb3MgYSBlc3RlIG9iamV0b1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cbiAgc2VuZE9iamVjdCgpIHtcbiAgICBjb25zdCBvYmplY3QgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrKG9iamVjdCk7XG4gIH1cblxuICBzdWJtaXRIYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnNlbmRPYmplY3QoKTtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH07XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuc3VibWl0SGFuZGxlcik7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuc3VibWl0SGFuZGxlcik7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICBpZiAodGhpcy5fZm9ybS5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cC1hZGRcIikpIHtcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLm5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIHVzZXJJbmZvO1xuICB9XG4gIHNldFVzZXJJbmZvKG5ld1VzZXJJbmZvKSB7XG4gICAgdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5ld1VzZXJJbmZvLm5hbWU7XG4gICAgdGhpcy5qb2JFbGVtZW50LnRleHRDb250ZW50ID0gbmV3VXNlckluZm8uam9iO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgYnRuRWRpdGFyUHJvZmlsZSxcbiAgYnRuQWRkQ2FyZCxcbiAgY2FyZHMsXG4gIGVsZW1lbnRQb3B1cE5hbWUsXG4gIGVsZW1lbnRQb3B1cEpvYixcbiAgaW5wdXRTZWxlY3RvcnNQb3B1cCxcbiAgcG9wdXBGb3JtU2VsZWN0b3JzVG9WYWxpZGF0ZSxcbiAgcG9wdXBBZGRGb3JtU2VsZWN0b3JzVG9WYWxpZGF0ZSxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbmNvbnN0IGluc2VydENhcmQgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGRhdGE6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIi5jYXJkLXRlbXBsYXRlXCIpO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgaW5zZXJ0Q2FyZC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBjYXJkc1xuKTtcbmluc2VydENhcmQucmVuZGVySXRlbXMoKTtcbmNvbnN0IG9wZW5Qb3B1cENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShcInBvcHVwLWFkZFwiLCAoZm9ybURhdGEpID0+IHtcbiAgaW5pdGlhbENhcmRzLnB1c2goZm9ybURhdGEpO1xuICBjb25zdCBpbnNlcnRDYXJkID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgZGF0YTogaW5pdGlhbENhcmRzLFxuICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIi5jYXJkLXRlbXBsYXRlXCIpO1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gICAgICAgIGluc2VydENhcmQuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgY2FyZHNcbiAgKTtcbiAgaW5zZXJ0Q2FyZC5yZW5kZXJJdGVtcygpO1xufSk7XG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhpbnB1dFNlbGVjdG9yc1BvcHVwKTtcbmNvbnN0IG9wZW5Qb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcInBvcHVwXCIsIChmb3JtRGF0YSkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhmb3JtRGF0YSk7XG59KTtcbmNvbnN0IGZvcm1Qcm9maWxlPSBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cEZvcm1TZWxlY3RvcnNUb1ZhbGlkYXRlLCBcIi5wb3B1cFwiKTtcbmJ0bkVkaXRhclByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgZ2V0VXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBlbGVtZW50UG9wdXBOYW1lLnZhbHVlID0gZ2V0VXNlckRhdGEubmFtZTtcbiAgZWxlbWVudFBvcHVwSm9iLnZhbHVlID0gZ2V0VXNlckRhdGEuam9iO1xuICBvcGVuUG9wdXBQcm9maWxlLm9wZW4oKTtcbiAgZm9ybVByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xufSk7XG5jb25zdCBmb3JtQ2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHBvcHVwQWRkRm9ybVNlbGVjdG9yc1RvVmFsaWRhdGUsIFwiLnBvcHVwLWFkZFwiKTtcbmJ0bkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgb3BlblBvcHVwQ2FyZC5vcGVuKCk7XG4gIGZvcm1DYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuIl0sIm5hbWVzIjpbIlBvcHVwIiwic2VsZWN0UG9wdXAiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3BvcHVwQ2xhc3MiLCJfc2VsZWN0UG9wdXAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb25jYXQiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwia2V5IiwidmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3RoaXMiLCJjbG9zZSIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiZXZlbnQiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfY2FyZCIsIl9lbGVtZW50TmFtZSIsIl9lbGVtZW50SW1nIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImxpbmsiLCJnZXRBdHRyaWJ1dGUiLCJhbHQiLCJjaXR5Iiwic3Vic3RyaW5nIiwibGVuZyIsInNldEF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwiaW5pdGlhbENhcmRzIiwibmFtZSIsImNvbnRhaW5lciIsImJ0bkVkaXRhclByb2ZpbGUiLCJidG5BZGRDYXJkIiwiY2FyZHMiLCJlbGVtZW50UG9wdXBOYW1lIiwiZm9ybXMiLCJwb3B1cGFkZCIsImVsZW1lbnRQb3B1cEpvYiIsIkNhcmQiLCJlbGVtZW50IiwiY2FyZFNlbGVjdG9yIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZENsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidG9nZ2xlIiwicGFyZW50Tm9kZSIsImluZGV4Q2FyZCIsImluZGV4T2YiLCJzcGxpY2UiLCJvcGVuV2luZG93Q29udGVudEltYWdlIiwiY2xvc2VXaW5kb3dkRXNjIiwib3BlbiIsIl9saWtlSW1hZ2UiLCJfdHJhc2hDYXJkIiwiRm9ybVZhbGlkYXRvciIsImRhdG9zIiwiZm9ybVNlbGVjdG9yIiwiX2Zvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yRm9ybSIsImlucHV0U2VsZWN0b3JGb3JtIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzc0Zvcm0iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzRm9ybSIsIl9pbnB1dEVycm9yQ2xhc3NGb3JtIiwiaW5wdXRFcnJvckNsYXNzRm9ybSIsIl9lcnJvckNsYXNzRm9ybSIsImVycm9yQ2xhc3NGb3JtIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTmFtZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsImRhdGEiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJpdGVtIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdENhbGxiYWNrIiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZCIsInByZXZlbnREZWZhdWx0Iiwic2VuZE9iamVjdCIsIl9zdWJtaXRDYWxsYmFjayIsIl9mb3JtIiwiX3RoaXMyIiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJvYmplY3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJzdWJtaXRIYW5kbGVyIiwicmVzZXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwibmFtZUVsZW1lbnQiLCJqb2JFbGVtZW50Iiwiam9iIiwibmV3VXNlckluZm8iLCJpbnNlcnRDYXJkIiwiY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJvcGVuUG9wdXBDYXJkIiwiZm9ybURhdGEiLCJwdXNoIiwidXNlckluZm8iLCJvcGVuUG9wdXBQcm9maWxlIiwic2V0VXNlckluZm8iLCJmb3JtUHJvZmlsZSIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yRm9ybSIsImdldFVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJlbmFibGVWYWxpZGF0aW9uIiwiZm9ybUNhcmQiXSwic291cmNlUm9vdCI6IiJ9